{
    "name": "sawdustandcoffee/sawdust-coffee",
    "description": "Sawdust & Coffee E-commerce Platform",
    "type": "project",
    "require": {},
    "scripts": {
        "deploy-backend": [
            "@php -r \"echo 'Installing backend dependencies...' . PHP_EOL;\"",
            "composer install --no-dev --no-interaction --optimize-autoloader --working-dir=backend",
            "@php -r \"if (!file_exists('backend/.env') && file_exists('backend/.env.example')) { copy('backend/.env.example', 'backend/.env'); echo 'Created backend/.env from example' . PHP_EOL; }\"",
            "@php -r \"echo 'Running migrations (may fail if .env not configured)...' . PHP_EOL;\"",
            "-php backend/artisan migrate --force",
            "-php backend/artisan config:cache",
            "-php backend/artisan route:cache",
            "-php backend/artisan view:cache"
        ],
        "deploy-frontend": [
            "@php -r \"echo 'Building frontend...' . PHP_EOL;\"",
            "@php -r \"if (!file_exists('frontend/.env') && file_exists('frontend/.env.example')) { copy('frontend/.env.example', 'frontend/.env'); echo 'Created frontend/.env from example' . PHP_EOL; }\"",
            "cd frontend && npm ci --production && npm run build && cd ..",
            "@php -r \"echo 'Deploying frontend to backend/public...' . PHP_EOL;\"",
            "cp -r frontend/dist/* backend/public/"
        ],
        "post-install-cmd": [
            "@php -r \"echo '=== Hostinger Deployment Started ===' . PHP_EOL;\"",
            "@deploy-backend",
            "@deploy-frontend",
            "@php -r \"echo '=== Deployment Complete ===' . PHP_EOL; echo 'NEXT: Configure backend/.env with database credentials and re-deploy!' . PHP_EOL;\""
        ],
        "post-update-cmd": [
            "@post-install-cmd"
        ]
    }
}
